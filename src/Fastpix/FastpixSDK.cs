/* 
 * This file is auto-generated.
 * Do not edit this file manually.
 * Your changes will be overwritten during the next generation.
 */
#nullable enable
namespace Fastpix
{
    using Fastpix.Hooks;
    using Fastpix.Models.Components;
    using Fastpix.Models.Errors;
    using Fastpix.Utils;
    using Fastpix.Utils.Retries;
    using Newtonsoft.Json;
    using System;
    using System.Collections.Generic;
    using System.Net.Http;
    using System.Threading;
    using System.Threading.Tasks;

    /// <summary>
    /// FASTPIX API&apos;S: FastPix provides a comprehensive set of APIs that enable developers to manage both **on-demand media (video/audio)** and **live streaming experiences**, with built-in security features through **cryptographic signing keys**. These APIs cover the full lifecycle of content creation, management, distribution, playback, and secure access, making them ideal for building scalable video-first applications.<br/>
    /// 
    /// <remarks>
    /// ### Media APIs (Video &amp; Audio on Demand)<br/>
    /// The **Media APIs** allow developers to create, retrieve, update, and delete media files, as well as manage metadata, playback settings, and additional tracks such as audio or subtitles. With these endpoints, developers can:<br/>
    /// - Upload videos directly or create media from URLs.   - Manage playback permissions and configure playback IDs.   - Add multilingual audio or subtitle tracks for global audiences.   - Build robust video-on-demand (VOD) and audio-on-demand (AOD) libraries.  <br/>
    /// **Use case scenarios**   - **Video-on-Demand Platforms:** Manage large content libraries for streaming services.   - **E-Learning Solutions:** Upload and organize lecture videos, metadata, and playback settings.   - **Multilingual Content Delivery:** Add multiple language tracks or subtitles to serve global users.  <br/>
    /// ### Live Stream APIs<br/>
    /// The **Live Stream APIs** simplify the process of creating, managing, and distributing live content. Developers can initiate broadcasts, configure stream settings, and extend streams to external platforms through simulcasting. These endpoints also support real-time interaction and customization of live events.<br/>
    /// - Start and manage live broadcasts programmatically.   - Control stream metadata, privacy, and playback options.   - Simulcast to platforms like YouTube, Facebook, or Twitch.   - Update stream details and manage live playback IDs in real time.  <br/>
    /// **Use case scenarios**   - **Event Broadcasting:** Enable organizers to set up live streams for conferences, concerts, or webinars.   - **Creator Platforms:** Provide streamers with tools for broadcasting gameplay, tutorials, or vlogs with simulcasting support.   - **Corporate Streaming:** Deliver secure internal town halls or meetings with privacy and playback controls.  <br/>
    /// ### Video Data APIs<br/>
    /// The **Video Data APIs** Provide insights into viewer interactions, performance metrics, and playback errors to optimize content delivery and user experience.<br/>
    /// <br/>
    ///  - Track video views, unique viewers, and engagement metrics<br/>
    ///  - Identify top-performing content and usage patterns<br/>
    ///  - Break down data by browser, device, or geography<br/>
    ///  - Detect playback errors and performance issues<br/>
    ///  - Enable data-driven content strategy decisions<br/>
    /// <br/>
    ///  **Use case scenarios** <br/>
    ///  - Analytics Dashboards: Monitor performance across content libraries<br/>
    ///  - Quality Monitoring: Diagnose and resolve playback issues<br/>
    ///  - Content Strategy Optimization: Identify high-value content<br/>
    ///  - User Behavior Insights: Understand audience interactions<br/>
    /// <br/>
    /// ### Signing Keys<br/>
    /// FastPix also provides endpoints for managing **cryptographic signing keys**, which are essential for securely signing and verifying tokens, such as JSON Web Tokens (JWTs). These keys are critical for authenticating and authorizing API requests, as well as for protecting access to media assets.<br/>
    /// - **Private key:** Used to create digital signatures (kept secret).   - **Public key:** Used to verify digital signatures (shared for verification).  <br/>
    /// By rotating and managing signing keys regularly, developers can maintain strong security practices and prevent unauthorized access.  <br/>
    /// **Use case scenarios**   - **Token-based authentication:** Validate user access to premium or subscription-based content.   - **Key rotation:** Regularly rotate keys to reduce risk of compromise.   - **Protect intellectual property:** Prevent unauthorized distribution of valuable media assets.   - **Control usage:** Restrict access to specific users, groups, or contexts.   - **Prevent tampering:** Ensure requested assets have not been modified.   - **Time-bound access:** Enable signed URLs with expiration for controlled viewing windows.
    /// </remarks>
    /// </summary>
    public interface IFastpixSDK
    {
        public IInputVideo InputVideo { get; }
        public IManageVideos ManageVideos { get; }
        public IVideos Videos { get; }
        public ITracks Tracks { get; }
        public IInVideoAIFeatures InVideoAIFeatures { get; }
        public IInVideoAI InVideoAI { get; }
        public IModerations Moderations { get; }

        /// <summary>
        /// Operations for video playback management
        /// </summary>
        public IPlayback Playback { get; }

        /// <summary>
        /// Operations for playlist management
        /// </summary>
        public IPlaylist Playlist { get; }
        public IPlaylists Playlists { get; }
        public IPlaybacks Playbacks { get; }
        public IDrmConfigurations DrmConfigurations { get; }
        public ILiveStreams LiveStreams { get; }
        public IStreams Streams { get; }
        public IManageLiveStream ManageLiveStream { get; }
        public ILivePlayback LivePlayback { get; }
        public ISimulcasts Simulcasts { get; }
        public ISimulcastStream SimulcastStream { get; }
        public ISigningKeys SigningKeys { get; }

        /// <summary>
        /// Operations involving views
        /// </summary>
        public IViews Views { get; }

        /// <summary>
        /// Operations involving dimensions
        /// </summary>
        public IDimensions Dimensions { get; }

        /// <summary>
        /// Operations involving metrics
        /// </summary>
        public IMetrics Metrics { get; }

        /// <summary>
        /// Operations involving errors
        /// </summary>
        public IErrors Errors { get; }
    }


    /// <summary>
    /// FASTPIX API&apos;S: FastPix provides a comprehensive set of APIs that enable developers to manage both **on-demand media (video/audio)** and **live streaming experiences**, with built-in security features through **cryptographic signing keys**. These APIs cover the full lifecycle of content creation, management, distribution, playback, and secure access, making them ideal for building scalable video-first applications.<br/>
    /// 
    /// <remarks>
    /// ### Media APIs (Video &amp; Audio on Demand)<br/>
    /// The **Media APIs** allow developers to create, retrieve, update, and delete media files, as well as manage metadata, playback settings, and additional tracks such as audio or subtitles. With these endpoints, developers can:<br/>
    /// - Upload videos directly or create media from URLs.   - Manage playback permissions and configure playback IDs.   - Add multilingual audio or subtitle tracks for global audiences.   - Build robust video-on-demand (VOD) and audio-on-demand (AOD) libraries.  <br/>
    /// **Use case scenarios**   - **Video-on-Demand Platforms:** Manage large content libraries for streaming services.   - **E-Learning Solutions:** Upload and organize lecture videos, metadata, and playback settings.   - **Multilingual Content Delivery:** Add multiple language tracks or subtitles to serve global users.  <br/>
    /// ### Live Stream APIs<br/>
    /// The **Live Stream APIs** simplify the process of creating, managing, and distributing live content. Developers can initiate broadcasts, configure stream settings, and extend streams to external platforms through simulcasting. These endpoints also support real-time interaction and customization of live events.<br/>
    /// - Start and manage live broadcasts programmatically.   - Control stream metadata, privacy, and playback options.   - Simulcast to platforms like YouTube, Facebook, or Twitch.   - Update stream details and manage live playback IDs in real time.  <br/>
    /// **Use case scenarios**   - **Event Broadcasting:** Enable organizers to set up live streams for conferences, concerts, or webinars.   - **Creator Platforms:** Provide streamers with tools for broadcasting gameplay, tutorials, or vlogs with simulcasting support.   - **Corporate Streaming:** Deliver secure internal town halls or meetings with privacy and playback controls.  <br/>
    /// ### Video Data APIs<br/>
    /// The **Video Data APIs** Provide insights into viewer interactions, performance metrics, and playback errors to optimize content delivery and user experience.<br/>
    /// <br/>
    ///  - Track video views, unique viewers, and engagement metrics<br/>
    ///  - Identify top-performing content and usage patterns<br/>
    ///  - Break down data by browser, device, or geography<br/>
    ///  - Detect playback errors and performance issues<br/>
    ///  - Enable data-driven content strategy decisions<br/>
    /// <br/>
    ///  **Use case scenarios** <br/>
    ///  - Analytics Dashboards: Monitor performance across content libraries<br/>
    ///  - Quality Monitoring: Diagnose and resolve playback issues<br/>
    ///  - Content Strategy Optimization: Identify high-value content<br/>
    ///  - User Behavior Insights: Understand audience interactions<br/>
    /// <br/>
    /// ### Signing Keys<br/>
    /// FastPix also provides endpoints for managing **cryptographic signing keys**, which are essential for securely signing and verifying tokens, such as JSON Web Tokens (JWTs). These keys are critical for authenticating and authorizing API requests, as well as for protecting access to media assets.<br/>
    /// - **Private key:** Used to create digital signatures (kept secret).   - **Public key:** Used to verify digital signatures (shared for verification).  <br/>
    /// By rotating and managing signing keys regularly, developers can maintain strong security practices and prevent unauthorized access.  <br/>
    /// **Use case scenarios**   - **Token-based authentication:** Validate user access to premium or subscription-based content.   - **Key rotation:** Regularly rotate keys to reduce risk of compromise.   - **Protect intellectual property:** Prevent unauthorized distribution of valuable media assets.   - **Control usage:** Restrict access to specific users, groups, or contexts.   - **Prevent tampering:** Ensure requested assets have not been modified.   - **Time-bound access:** Enable signed URLs with expiration for controlled viewing windows.
    /// </remarks>
    /// </summary>
    public class FastpixSDK: IFastpixSDK
    {
        public SDKConfig SDKConfiguration { get; private set; }

        private const string _language = Constants.Language;
        private const string _sdkVersion = Constants.SdkVersion;
        private const string _sdkGenVersion = Constants.SdkGenVersion;
        private const string _openapiDocVersion = Constants.OpenApiDocVersion;
        public IInputVideo InputVideo { get; private set; }
        public IManageVideos ManageVideos { get; private set; }
        public IVideos Videos { get; private set; }
        public ITracks Tracks { get; private set; }
        public IInVideoAIFeatures InVideoAIFeatures { get; private set; }
        public IInVideoAI InVideoAI { get; private set; }
        public IModerations Moderations { get; private set; }
        public IPlayback Playback { get; private set; }
        public IPlaylist Playlist { get; private set; }
        public IPlaylists Playlists { get; private set; }
        public IPlaybacks Playbacks { get; private set; }
        public IDrmConfigurations DrmConfigurations { get; private set; }
        public ILiveStreams LiveStreams { get; private set; }
        public IStreams Streams { get; private set; }
        public IManageLiveStream ManageLiveStream { get; private set; }
        public ILivePlayback LivePlayback { get; private set; }
        public ISimulcasts Simulcasts { get; private set; }
        public ISimulcastStream SimulcastStream { get; private set; }
        public ISigningKeys SigningKeys { get; private set; }
        public IViews Views { get; private set; }
        public IDimensions Dimensions { get; private set; }
        public IMetrics Metrics { get; private set; }
        public IErrors Errors { get; private set; }

        public FastpixSDK(SDKConfig config)
        {
            SDKConfiguration = config;
            InitHooks();

            InputVideo = new InputVideo(SDKConfiguration);

            ManageVideos = new ManageVideos(SDKConfiguration);

            Videos = new Videos(SDKConfiguration);

            Tracks = new Tracks(SDKConfiguration);

            InVideoAIFeatures = new InVideoAIFeatures(SDKConfiguration);

            InVideoAI = new InVideoAI(SDKConfiguration);

            Moderations = new Moderations(SDKConfiguration);

            Playback = new Playback(SDKConfiguration);

            Playlist = new Playlist(SDKConfiguration);

            Playlists = new Playlists(SDKConfiguration);

            Playbacks = new Playbacks(SDKConfiguration);

            DrmConfigurations = new DrmConfigurations(SDKConfiguration);

            LiveStreams = new LiveStreams(SDKConfiguration);

            Streams = new Streams(SDKConfiguration);

            ManageLiveStream = new ManageLiveStream(SDKConfiguration);

            LivePlayback = new LivePlayback(SDKConfiguration);

            Simulcasts = new Simulcasts(SDKConfiguration);

            SimulcastStream = new SimulcastStream(SDKConfiguration);

            SigningKeys = new SigningKeys(SDKConfiguration);

            Views = new Views(SDKConfiguration);

            Dimensions = new Dimensions(SDKConfiguration);

            Metrics = new Metrics(SDKConfiguration);

            Errors = new Errors(SDKConfiguration);
        }

        /// <summary>
        /// Initializes a new instance of the SDK with optional configuration parameters.
        /// </summary>
        /// <param name="security">The security configuration to use for API requests. If provided, this will be used as a static security configuration.</param>
        /// <param name="securitySource">A function that returns the security configuration dynamically. This takes precedence over the static security parameter if both are provided.</param>
        /// <param name="serverIndex">The index of the server to use from the predefined server list. Must be between 0 and the length of the server list. Defaults to 0 if not specified.</param>
        /// <param name="serverUrl">A custom server URL to use instead of the predefined server list. If provided with urlParams, the URL will be templated with the provided parameters.</param>
        /// <param name="urlParams">A dictionary of parameters to use for templating the serverUrl. Only used when serverUrl is provided.</param>
        /// <param name="client">A custom HTTP client implementation to use for making API requests. If not provided, the default FastpixHttpClient will be used.</param>
        /// <param name="retryConfig">Configuration for retry behavior when API requests fail. Defines retry strategies, backoff policies, and maximum retry attempts.</param>
        /// <exception cref="Exception">Thrown when the serverIndex is out of range (less than 0 or greater than or equal to the server list length).</exception>
        public FastpixSDK(Fastpix.Models.Components.Security? security = null, Func<Fastpix.Models.Components.Security>? securitySource = null, int? serverIndex = null, string? serverUrl = null, Dictionary<string, string>? urlParams = null, IFastpixHttpClient? client = null, RetryConfig? retryConfig = null)
        {
            if (serverIndex != null)
            {
                if (serverIndex.Value < 0 || serverIndex.Value >= SDKConfig.ServerList.Length)
                {
                    throw new Exception($"Invalid server index {serverIndex.Value}");
                }
            }

            if (serverUrl != null)
            {
                if (urlParams != null)
                {
                    serverUrl = Utilities.TemplateUrl(serverUrl, urlParams);
                }
            }
            Func<Fastpix.Models.Components.Security>? _securitySource = null;

            if(securitySource != null)
            {
                _securitySource = securitySource;
            }
            else if(security != null)
            {
                _securitySource = () => security;
            }
            else
            {
                throw new Exception("security and securitySource cannot both be null");
            }

            SDKConfiguration = new SDKConfig(client)
            {
                ServerIndex = serverIndex == null ? 0 : serverIndex.Value,
                ServerUrl = serverUrl == null ? "" : serverUrl,
                SecuritySource = _securitySource,
                RetryConfig = retryConfig
            };

            InitHooks();

            InputVideo = new InputVideo(SDKConfiguration);

            ManageVideos = new ManageVideos(SDKConfiguration);

            Videos = new Videos(SDKConfiguration);

            Tracks = new Tracks(SDKConfiguration);

            InVideoAIFeatures = new InVideoAIFeatures(SDKConfiguration);

            InVideoAI = new InVideoAI(SDKConfiguration);

            Moderations = new Moderations(SDKConfiguration);

            Playback = new Playback(SDKConfiguration);

            Playlist = new Playlist(SDKConfiguration);

            Playlists = new Playlists(SDKConfiguration);

            Playbacks = new Playbacks(SDKConfiguration);

            DrmConfigurations = new DrmConfigurations(SDKConfiguration);

            LiveStreams = new LiveStreams(SDKConfiguration);

            Streams = new Streams(SDKConfiguration);

            ManageLiveStream = new ManageLiveStream(SDKConfiguration);

            LivePlayback = new LivePlayback(SDKConfiguration);

            Simulcasts = new Simulcasts(SDKConfiguration);

            SimulcastStream = new SimulcastStream(SDKConfiguration);

            SigningKeys = new SigningKeys(SDKConfiguration);

            Views = new Views(SDKConfiguration);

            Dimensions = new Dimensions(SDKConfiguration);

            Metrics = new Metrics(SDKConfiguration);

            Errors = new Errors(SDKConfiguration);
        }

        private void InitHooks()
        {
            SDKConfiguration = SDKConfiguration.Hooks.SDKInit(SDKConfiguration);
        }

        public class SDKBuilder
        {
            private SDKConfig _sdkConfig = new SDKConfig(client: new FastpixHttpClient());

            public SDKBuilder() { }

            public SDKBuilder WithServerIndex(int serverIndex)
            {
                if (serverIndex < 0 || serverIndex >= SDKConfig.ServerList.Length)
                {
                    throw new Exception($"Invalid server index {serverIndex}");
                }
                _sdkConfig.ServerIndex = serverIndex;
                return this;
            }

            public SDKBuilder WithServerUrl(string serverUrl, Dictionary<string, string>? serverVariables = null)
            {
                if (serverVariables != null)
                {
                    serverUrl = Utilities.TemplateUrl(serverUrl, serverVariables);
                }
                _sdkConfig.ServerUrl = serverUrl;
                return this;
            }

            public SDKBuilder WithSecuritySource(Func<Fastpix.Models.Components.Security> securitySource)
            {
                _sdkConfig.SecuritySource = securitySource;
                return this;
            }

            public SDKBuilder WithSecurity(Fastpix.Models.Components.Security security)
            {
                _sdkConfig.SecuritySource = () => security;
                return this;
            }

            public SDKBuilder WithClient(IFastpixHttpClient client)
            {
                _sdkConfig.Client = client;
                return this;
            }

            public SDKBuilder WithRetryConfig(RetryConfig retryConfig)
            {
                _sdkConfig.RetryConfig = retryConfig;
                return this;
            }

            public FastpixSDK Build()
            {
              if (_sdkConfig.SecuritySource == null) {
                  throw new Exception("securitySource cannot be null. One of `Security` or `securitySource` needs to be defined.");
              }
              return new FastpixSDK(_sdkConfig);
            }

        }

        public static SDKBuilder Builder() => new SDKBuilder();
    }
}